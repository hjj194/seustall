# 商品交易逻辑（以发布-买入为例）

self:卖方 other:买房

1. 用户发布商品(1) [Item self token]

2. 购买者点击“我想买”

3. 给发布者发送购买者求购信息[other token itemid]-> [other uuid,timestamp]

   * *【发布者撤销我想买信息列表】

4. 发布者获取“我想买”信息列表 [list of [itemid list of other [uuid timestamp]

   1. 发布者拒绝某个请求

      1. 删除对应”我想买“记录[delete record[itemid uuid]]
      2. 通知我想买发起者”发布者拒绝了交易 notify other[ failed itemid ]
      3. 结束

   2. 发布者选择一个用户进行交易

      1. 商品标记为已预定(3) [sold 3 to other uuid]

         1. 完成面交流程

            1. 买家点击确认收货(2) [sold 2  verify other uuid]
            2. 清空所有我想买记录[clear record where itemid]
            3. 通知买房同意交易，通知其他我想买发起者”交易被卖出”

         2. 未完成面交流程

            1. 卖方主动或者买方联系卖方撤销交易

            2. 商品信息重置为状态1，返回\1

               *保留我想买记录

               